Hashnode blog links:

Jenkins Project link : https://devopsprojects77.hashnode.dev/jenkins-end-to-end-pipeline
todays blog link : https://docker77.hashnode.dev/dockerfiles-for-web-applications
Jenkins class notes link : https://devops-cicd.hashnode.dev/from-code-to-deployment-the-power-of-jenkins-in-cicd
Todays notes: https://devops-cicd.hashnode.dev/integrating-git-with-jenkins-a-complete-guide
link-1: https://docker77.hashnode.dev/docker-introduction-architecture
link-2: https://docker77.hashnode.dev/mastering-the-art-of-creating-containers
____________________________________________________

yum install maven -y
maven -v
mvn archetype:generate
cd Srinu/src/main/java/
mvn build
mvn compile
mvn test
mvn install
mvn package
mvn clean
____________________________________________________


Docker Interview Questions:

Todays Interview Questions:
Explain about docker architecture
Refer all docker commands

CMD vs ENTRYPOINT
Write a Dockerfile for Python application

What is Docker
What is Containerization
Diff between vm and container
what is docker image
what is container
diff b/w container and image
what is command to create a container
what is command to pull the images
how to see running containers
how to check container logs
____________________________________________________

Docker Commands:

DOCKER COMMANDS
1.  To see the list of images : docker images
2.  To pull the image : docker pull image-name
3.  To create a container : docker run -d --name cont-name -p host-port:container portimage
4.  To see running containers : docker ps
5.  To see all containers : docker ps -a
6.  To stop the container : docker stop cont-name
7.  To stop multiple containers : docker stop cont-1 cont-2 cont-3
8.  To stop all containers : docker stop $(docker ps)
9.  To start a container : docker start cont-name
10. To start multiple containers : docker start cont-1 cont-2 cont-3
11. To start all containers : docker start $(docker ps -a)
12. To remove a stopped container : docker rm cont-name
13. To remove a running container : docker rm -f cont-name
14. To remove all stopped containers : docker rm $(docker ps -a)
15. To remove an image : docker rmi image-name
16. To remove unused images : docker rmi $(docker images)
17. To get the full info about container : docker inspect cont-name
18. To get the container logs : docker logs cont-name
19. To enter into the container : docker exec -it cont-name bash
20. To get full info about image : docker inspect image image-name

ex:

yum install docker -y
docker version
systemctl status docker
systemctl start docker
systemctl status docker
docker version
docker pull shaikmustafa/paytm:bus
docker images
docker run -d --name bus -p 1431:80  shaikmustafa/paytm:bus
docker ps
docker logs bus
docker ps
docker pull shaikmustafa/paytm:movie
docker images
docker run -d --name movie -p 1111:80  shaikmustafa/paytm:movie
docker ps
docker pull shaikmustafa/paytm:bank
docker images
docker run -d --name bank -p 2222:80 shaikmustafa/paytm:movie
docker ps
docker rm bank
docker stop bank
docker rm bank
docker run -d --name bank -p 2222:80 shaikmustafa/paytm:bank
docker stop movie
docker start movie
docker stop bank
docker start bank
docker images
____________________________________________________
Naveen meeting

Meeting ID
707 543 4121
Passcode
773153
Invite link
https://bnsf.zoom.us/j/7075434121?pwd=NVlEMnJzS1NHMzVNaHlVbndYR3pKdz09
Host
Srinu V
Participant ID
431613
______________________________

to clear the windows powershell history
[Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()
__________________________________

cd C:\Users\srini\Downloads\
cd C:\Users\2242395\Downloads\
__________________________________

Deepseek code link : 

e-commerce app : https://chat.deepseek.com/share/7avbonbpq9vno81bvj
Python-app : https://chat.deepseek.com/share/qpyne33hte7plm5729
__________________________________
git repos:
https://github.com/devops0014/dockerwebapp.git
https://github.com/Srinuas/Nexus.git
https://github.com/Srinuas/dockerapp.git
https://github.com/Srinuas/sql.git
https://github.com/Srinuas/bank.git
https://github.com/Srinuas/flightapp.git
https://github.com/Srinuas/metroapp.git
https://github.com/Srinuas/e-com.git
https://github.com/Srinuas/notes.git
https://github.com/Srinuas/all-setups.git

git config --global user.email "srinu.as@og.com"
git config --global user.name "srinuas"

Private repos kavali ante Personal Access Token add cheyyali:

curl -s -H "Authorization: Bearer <TOKEN>" "https://api.github.com/user/repos?per_page=100" | jq -r '.[].name'

curl -s -H "Authorization: Bearer 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" "https://api.gith
ub.com/user/repos?per_page=100" | jq -r '.[].name'

To un install a git:

yum list installed | grep git
sudo yum remove git-core.x86_64 -y

/github-webhook/
__________________________________
docker hub repos:

srinuas/ecom:nex
srinuas/flight:py
srinuas/metro:nginx
srinuas/ecom2:httpd
srinuas/devopsapp:mysqldb
srinuas/devopsapp:jsapp
srinuas/swiggy:food (httpd)
srinuas/swiggy:dineout (nginx)
srinuas/swiggy:genie (nginx)
srinuas/swiggy:instamart (httpd)
docker pull srinuas/bank:js
__________________________________

default paths:
httpd container default path: /usr/local/apache2/htdocs/
nginx container default path: /usr/share/nginx/html
__________________________________
copy file from local to remote
scp -i mylap.pem localfile.txt ec2-user@ec2-ip:/home/ec2-user/

aws ssh connect long time:
ssh -i "mykey.pem" -o ServerAliveInterval=60 -o ServerAliveCountMax=60 ec2-user@Public-IP
ssh -o ServerAliveInterval=60 -o ServerAliveCountMax=60 -i "C:\Users\srini\Downloads\mylap.pem" ec2-user@<Public-IP>
__________________________________

106.221.184.90 Lalitha internet ip

To check version from master to slave:
ansible dev -m shell -a "mvn -v"
________________________________________________
jenkin
username: admin
password: admin@123

tomcat
username: tomcat
password: admin@123

nexus
username: admin
password: admin@123
_________________________________________

tomcat commands

yum install java-17-amazon-corretto -y
wget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.112/bin/apache-tomcat-9.0.112.tar.gz
tar -zxvf apache-tomcat-9.0.112.tar.gz
sed -i '56  a\<role rolename="manager-gui"/>' apache-tomcat-9.0.112/conf/tomcat-users.xml
sed -i '57  a\<role rolename="manager-script"/>' apache-tomcat-9.0.112/conf/tomcat-users.xml
sed -i '58  a\<user username="tomcat" password="admin@123" roles="manager-gui, manager-script"/>' apache-tomcat-9.0.112/conf/tomcat-users.xml
sed -i '59  a\</tomcat-users>' apache-tomcat-9.0.112/conf/tomcat-users.xml
sed -i '56d' apache-tomcat-9.0.112/conf/tomcat-users.xml
sed -i '21d' apache-tomcat-9.0.112/webapps/manager/META-INF/context.xml
sed -i '22d'  apache-tomcat-9.0.112/webapps/manager/META-INF/context.xml
sh apache-tomcat-9.0.112/bin/startup.sh

Tomcat port change:
_________________________________________
in root folder you can find tomcat folder
cd apache-tomcat-9.0.112/conf/
grep -n 8080 server.xml
vim server.xml
:71
change port to any like 2345
:wq!
cd ..
cd bin/
./shutdown.sh
./startup.sh

_______________________________________________

Jenkins commands

sudo yum update –y
sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key
sudo yum upgrade
sudo yum install java-17-amazon-corretto -y
sudo yum install jenkins git -y
sudo systemctl enable jenkins
sudo systemctl start jenkins
sudo systemctl status Jenkins
sudo yum install docker -y
sudo systemctl start docker
sudo systemctl status Jenkins
sudo systemctl status docker

jenkins port change
___________________________________________
vim /usr/lib/systemd/system/jenkins.service
:72
change port number 8080 to 1234
:wq
sudo systemctl daemon-reload
sudo systemctl restart jenkins
sudo systemctl status jenkins
_______________________________________________

nexus commands

sudo yum update -y
sudo yum install wget -y
sudo yum install java-17-amazon-corretto-jmods -y
cd /opt
sudo wget https://download.sonatype.com/nexus/3/nexus-3.79.1-04-linux-x86_64.tar.gz
sudo tar -xvf nexus-3.79.1-04-linux-x86_64.tar.gz
sudo mv nexus-3.79.1-04 nexus
sudo adduser nexus
sudo chown -R nexus:nexus /opt/nexus
sudo chown -R nexus:nexus /opt/sonatype*
su - nexus
cd /opt/nexus/bin/
./nexus start
___________________________________________________
Sonar cube

#! /bin/bash
#Launch an instance with 9000 and t2.medium
cd /opt/
wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-8.9.6.50800.zip
unzip sonarqube-8.9.6.50800.zip
yum install java-17-amazon-corretto -y
useradd sonar
chown sonar:sonar sonarqube-8.9.6.50800 -R
chmod 777 sonarqube-8.9.6.50800 -R
su - sonar

#run this on server manually
#sh /opt/sonarqube-8.9.6.50800/bin/linux/sonar.sh start
#echo "user=admin & password=admin"

_______________________________________________________

Docker compose install:

vim .bashrc
export PATH=$PATH:/usr/local/bin/
source .bashrc

# Download the current stable release of Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
# Apply executable permissions
sudo chmod +x /usr/local/bin/docker-compose
# Create a symbolic link
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose

# Install using pip (Python package manager)
sudo yum install docker python3-pip -y
sudo pip3 install docker-compose
systemctl start docker

#check version
sudo docker-compose --version
sudo systemctl status docker

_______________________
mvn sonar:sonar \
  -Dsonar.projectKey=myproj \
  -Dsonar.host.url=http://3.236.189.247:9000 \
  -Dsonar.login=cc1b1a35655d2a00ba6c4c5a8acf79f0ef57cf53
_____________________________________________________
Email Integration Script:

srinivasvanapalli0499@gmail.com

gmail key:
fkuo piyy hedf wnlv
_______________________________________________________
Pipilines section:

    post {
        always {
            mail to: 'srinivasvanapalli0499@gmail.com',
            subject: "Pipeline status - ${currentBuild.currentResult}",
            body: """Your pipeline name: ${JOB_NAME}
Build #${BUILD_NUMBER}
Status: ${currentBuild.currentResult}
Build URL: ${BUILD_URL}
Console Output: ${BUILD_URL}console"""
        }
    }


_______________________________________________________


pipeline {
    agent any
    tools {
        maven 'mymvn'
    }
    stages {
        stage ('code') {
            steps {
                git branch: 'main', credentialsId: 'Git-http-key', url: 'https://github.com/Srinuas/dockerapp.git'
            }
        }
        stage ('cqa') {
            steps {
                withSonarQubeEnv('mysnr') {
                    sh "mvn clean verify sonar:sonar -Dsonar.projectKey=app"
                }
            }
        }
        stage ('maven') {
            steps {
                sh 'mvn clean package'
                sh 'cp -r target Docker-app'
            }
        }
        stage ('artifact') {
            steps {
                nexusArtifactUploader artifacts: [[artifactId: 'vprofile', classifier: '', file: 'target/vprofile-v2.war', type: 'war']], credentialsId: 'nex-key', groupId: 'com.visualpathit', nexusUrl: '23.20.139.218:8081', nexusVersion: 'nexus3', protocol: 'http', repository: 'nexrepo', version: 'v2'
            }
        }
        stage ('docker build') {
            steps {
                sh 'docker build -t appimg:1 Docker-app'
                sh 'docker build -t dbimg:1 Docker-db'
            }
        }
        stage ('docker deploy') {
            input {
                message 'deploy???'
            }
            steps {
                sh 'docker rm -f devopsdb appcon'
                sh 'docker run -d --name devopsdb -p 2222:3306 dbimg:1'
                sh 'docker run -itd --name appcon -p 3333:8080 --link devopsdb:mysqlcon appimg:1'
            }
        }
    }
    post {
        always {
            mail to: 'srinivasvanapalli0499@gmail.com',
            subject: "Pipeline : ${JOB_NAME} - ${BUILD_DISPLAY_NAME}",
            body: "Your pipeline is : ${currentBuild.currentResult.toLowerCase()}\nMore info at: ${BUILD_URL}"
        }
    }
}

____________________________________________________

pipeline {

    agent {

        node {

            label 'test'

        }

    }

    tools {

        maven 'mvnsri'

    }

    stages {

        stage ('code') {

            steps {

                git branch: 'main1', credentialsId: 'jenkin_server', url: 'https://github.com/Srinuas/Nexus.git'

            }

        }

        stage ('build') {

            steps {

                sh 'mvn clean package'

            }

        }

        stage ('artifact') {

            steps {

                nexusArtifactUploader artifacts: [[artifactId: 'myweb', classifier: '', file: 'target/myweb-8.7.1.war', type: 'war']], credentialsId: 'nexuserver', groupId: 'in.javahome', nexusUrl: '18.206.153.227:8081', nexusVersion: 'nexus3', protocol: 'http', repository: 'myrepo', version: '8.7.1'

            }

        }

        stage ('deploy') {

            steps {

                deploy adapters: [tomcat9(alternativeDeploymentContext: '', credentialsId: 'Devser', path: '', url: 'http://100.24.118.160:8080/')], contextPath: 'myapppipe', war: 'target/*.war'

            }

        }

    }

}
________________________________________________

[root@docker metro]# docker logs con2
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2025/12/10 09:27:50 [notice] 1#1: using the "epoll" event method
2025/12/10 09:27:50 [notice] 1#1: nginx/1.29.4
2025/12/10 09:27:50 [notice] 1#1: built by gcc 14.2.0 (Debian 14.2.0-19)
2025/12/10 09:27:50 [notice] 1#1: OS: Linux 6.1.158-180.294.amzn2023.x86_64
2025/12/10 09:27:50 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 32768:65536
2025/12/10 09:27:50 [notice] 1#1: start worker processes
2025/12/10 09:27:50 [notice] 1#1: start worker process 29
2025/12/10 09:27:50 [notice] 1#1: start worker process 30
157.50.89.75 - - [10/Dec/2025:09:28:05 +0000] "GET / HTTP/1.1" 200 51671 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0" "-"
106.221.184.90 - - [10/Dec/2025:09:31:15 +0000] "GET / HTTP/1.1" 200 51671 "android-app://com.google.android.googlequicksearchbox/" "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Mobile Safari/537.36" "-"
2025/12/10 09:31:16 [error] 29#29: *4 open() "/usr/share/nginx/html/favicon.ico" failed (2: No such file or directory), client: 106.221.184.90, server: localhost, request: "GET /favicon.ico HTTP/1.1", host: "98.91.192.95:8080", referrer: "http://98.91.192.95:8080/"
 - - [10/Dec/2025:09:31:16 +0000] "GET /favicon.ico HTTP/1.1" 404 555 "http://98.91.192.95:8080/" "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Mobile Safari/537.36" "-"

_____________________________________________

pod manifesst file sample:

---
apiVersion: v1
kind: Pod
metadata:
  name: pod3
spec:
  containers:
    - name: con1
      image: srinuas/swiggy:food
      ports:
        - containerPort: 80

